(function(t){function e(e){for(var r,a,s=e[0],u=e[1],c=e[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={app:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var l=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"0589":function(t,e,n){},"165e":function(t,e,n){},2154:function(t,e,n){},2989:function(t,e,n){"use strict";n("0589")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],a={data:function(){return{}}},s=a,u=(n("034f"),n("2877")),c=Object(u["a"])(s,o,i,!1,null,null,null),l=c.exports,d=n("8c4f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"box"},[n("span",{staticClass:"title "},[t._v(t._s("登入"))]),n("Form",{ref:"loginForm",staticClass:"loginform",attrs:{model:t.loginForm,rules:t.loginRule},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginSubmit("loginForm")}}},[n("FormItem",{staticClass:"ItemPadding",staticStyle:{"text-align":"left","margin-bottom":"5px"},attrs:{prop:"loginId"}},[n("Input",{attrs:{placeholder:"輸入帳號"},model:{value:t.loginForm.loginId,callback:function(e){t.$set(t.loginForm,"loginId",e)},expression:"loginForm.loginId"}})],1),n("FormItem",{staticClass:"ItemPadding",staticStyle:{"text-align":"left","margin-bottom":"10px"},attrs:{prop:"password"}},[n("Input",{attrs:{password:"",type:"password",placeholder:"輸入密碼"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),n("FormItem",{staticClass:"ItemPadding",staticStyle:{"text-align":"right"}},[n("Button",{staticStyle:{width:"100px","font-size":"14px","margin-top":"20px"},attrs:{loading:t.loading,type:"primary"},on:{click:function(e){return t.loginSubmit("loginForm")}}},[t._v(t._s("登入"))])],1)],1)],1)])},m=[],p=(n("d3b7"),n("841c"),n("ac1f"),n("5319"),n("25f0"),n("466d"),n("b64b"),navigator.userAgent);function g(t){var e=!1,n=/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/;return-1!==t.search(n)&&(e=!0),e}function h(){var t=Date.now();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}function v(t){return""===t||void 0===t||null===t}function x(){return p.indexOf("Android")>-1||p.indexOf("Adr")>-1}function b(){return!!p.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}function y(t){var e=/^[0-9]+$/;return!!e.test(t)}function w(t){for(var e=Object.keys(t).sort(),n={},r=0;r<e.length;r++)n[e[r]]=t[e[r]];return n}var S={getUUID:h,isEmpty:v,isAndroid:x,isiOS:b,isDigit:y,objKeySort:w,isEmail:g},_={name:"home",data:function(){var t=function(t,e,n){""===e?n(new Error("必填")):S.isEmail(e)?n():n(new Error("Email 格式錯誤"))},e=function(t,e,n){""===e?n(new Error("必填")):S.isDigit(e)?n():n(new Error("只能輸入數字"))};return{loginForm:{loginId:"",password:""},loginRule:{loginId:[{validator:t,trigger:"blur"}],password:[{validator:e,trigger:"blur"}]},loading:!1}},created:function(){},methods:{loginSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t&&(e.$Spin.show(),e.loading=!0,e.$store.dispatch("login",{id:e.loginForm.loginId,pass:e.loginForm.password}).then((function(t){e.$store.dispatch("loginState",t),e.$router.push({name:"order"})})).catch((function(t){var n="帳號或密碼錯誤";switch(t.error){case 10001:n="尚未註冊";break}e.$Message.warning({content:n,duration:5,closable:!0})})).finally((function(){e.loading=!1,e.$Spin.hide()})))}))}},mounted:function(){}},O=_,I=(n("66c0"),n("f1b4"),Object(u["a"])(O,f,m,!1,null,"c138d400",null)),$=I.exports,j=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},E=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("404")])])}],k={},C=Object(u["a"])(k,j,E,!1,null,null,null),F=C.exports,P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order"},[r("div",{staticClass:"sky"},[r("img",{staticStyle:{display:"block",width:"100%","max-width":"40px",border:"1px solid #b2b1b0","border-radius":"50%"},attrs:{src:n("874c")}}),r("Button",{attrs:{type:"text"},on:{click:t.logout}},[t._v("登出")])],1),r("Row",[r("Col",{attrs:{span:"4"}},[r("Menu",[r("Submenu",{attrs:{name:"1"}},[r("template",{slot:"title"},[t._v(" 訂單管理 ")]),r("MenuItem",{attrs:{name:"1-1",to:{name:"query"}}},[t._v("訂單查詢")]),r("MenuItem",{attrs:{name:"1-2",to:{name:"addorder"}}},[t._v("新增訂單")])],2)],1)],1),r("Col",{attrs:{span:"20"}},[r("router-view")],1)],1)],1)},L=[],A={name:"order",data:function(){return{loading:!1}},computed:{},created:function(){},methods:{logout:function(){this.$store.dispatch("logout"),this.$router.push({name:"login"})}}},q=A,M=(n("2989"),Object(u["a"])(q,P,L,!1,null,"2f901352",null)),U=M.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"query"},[t._v(" query ")])},z=[],D={name:"query",data:function(){return{loading:!1}},computed:{},created:function(){},methods:{}},J=D,T=Object(u["a"])(J,R,z,!1,null,"5822415e",null),Z=T.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"addorder"},[t._v(" addorder ")])},N=[],K={name:"addorder",data:function(){return{loading:!1}},computed:{},created:function(){},methods:{}},X=K,G=Object(u["a"])(X,B,N,!1,null,"79f3e10b",null),H=G.exports;r["default"].use(d["a"]);var Q=[{path:"/",name:"login",component:$,meta:{requiresAuth:!1}},{path:"/order",name:"order",component:U,meta:{requiresAuth:!0},children:[{path:"query",name:"query",component:Z,meta:{requiresAuth:!0}},{path:"addorder",name:"addorder",component:H,meta:{requiresAuth:!0}}]},{path:"/*",name:"404",component:F}],V=new d["a"]({mode:"history",base:"/ordersys/",routes:Q}),W=V,Y=(n("b0c0"),n("2f62")),tt={login:function(t){return new Promise((function(e,n){var r=[{id:"heineken751121@gmail.com",pass:"12345"}],o=r.some((function(e){return e.id===t.id}));if(o){var i=r.every((function(e){return e.id===t.id&&e.pass===t.pass}));i?e({data:{id:1,name:"王郁翔"}}):n({error:1})}else n({error:10001})}))}};r["default"].use(Y["a"]);var et=new Y["a"].Store({state:{isLogin:!1,user:{id:"",name:""}},mutations:{setLoginState:function(t,e){t.isLogin=e.isLogin,t.user.id=e.id,t.user.name=e.name}},actions:{login:function(t,e){return new Promise((function(t,n){tt.login(e).then((function(e){t(e)})).catch((function(t){n(t)}))}))},loginState:function(t,e){e.isLogin=!0,t.commit("setLoginState",e),sessionStorage.setItem("accountState",encodeURIComponent(JSON.stringify({isLogin:!0,data:{id:e,name:e.name}}),"utf-8"))},setLoginState:function(t,e){t.commit("setLoginState",e)},logout:function(t){t.state.isLogin=!1,t.state.user={},sessionStorage.removeItem("accountState")}},modules:{}}),nt=n("2106"),rt=n.n(nt),ot=(n("f8ce"),n("f825")),it=n.n(ot),at=n("31bd");if(r["default"].config.productionTip=!1,Object.defineProperty(r["default"].prototype,"$http",{value:rt.a}),r["default"].use(it.a),Object(at["sync"])(et,W),!S.isEmpty(sessionStorage.getItem("accountState"))){var st=JSON.parse(decodeURIComponent(sessionStorage.getItem("accountState"),"utf-8"));et.dispatch("setLoginState",st)}W.beforeEach((function(t,e,n){t.matched.some((function(t){return t.meta.requiresAuth}))?et.state.isLogin?n():n({name:"login"}):et.state.isLogin?n({name:"order"}):n()})),new r["default"]({router:W,store:et,render:function(t){return t(l)}}).$mount("#app")},"66c0":function(t,e,n){"use strict";n("2154")},"85ec":function(t,e,n){},"874c":function(t,e,n){t.exports=n.p+"assets/img/default-profile.b80a382d.png"},f1b4:function(t,e,n){"use strict";n("165e")}});
//# sourceMappingURL=app.8ff90f7e.js.map